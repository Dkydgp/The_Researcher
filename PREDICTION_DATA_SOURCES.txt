# Stock Prediction Data Sources & Analysis Framework
# Complete list of all indicators and data being checked for AI predictions

## ðŸŒ GLOBAL MARKET CONTEXT
- S&P 500 Index (^GSPC)
  â””â”€ Close price
  â””â”€ Daily percentage change
  â””â”€ Impact: US market sentiment affects Indian stocks

- Crude Oil (CL=F - WTI)
  â””â”€ Price per barrel
  â””â”€ Impact: Energy costs affect corporate margins

- USD/INR Exchange Rate
  â””â”€ Currency exchange rate
  â””â”€ Impact: Export competitiveness, import costs

- Market Regime Detection
  â””â”€ NIFTY Trend: BULL / BEAR / SIDEWAYS
      â””â”€ Based on 3-month (60-day) NIFTY performance
      â””â”€ BULL if +10% or more
      â””â”€ BEAR if -10% or less
      â””â”€ SIDEWAYS otherwise
  â””â”€ Volatility Regime: HIGH / MEDIUM / LOW
      â””â”€ Based on 30-day rolling standard deviation
      â””â”€ HIGH if std dev > 2%
      â””â”€ MEDIUM if 1-2%
      â””â”€ LOW if < 1%

## ðŸ“Š ADVANCED TECHNICAL INDICATORS

### RSI (Relative Strength Index)
- Period: 14 days
- Range: 0-100
- Signals:
  â””â”€ > 70: OVERBOUGHT (potential sell signal)
  â””â”€ < 30: OVERSOLD (potential buy signal)
  â””â”€ 30-70: NEUTRAL
- Calculation: Based on average gains vs losses over 14 days

### MACD (Moving Average Convergence Divergence)
- Fast EMA: 12 periods
- Slow EMA: 26 periods
- Signal Line: 9-period EMA of MACD
- Components:
  â””â”€ MACD Line: Fast EMA - Slow EMA
  â””â”€ Signal Line: 9-day EMA of MACD
  â””â”€ Histogram: MACD - Signal Line
- Signals:
  â””â”€ MACD > Signal: BULLISH (momentum building)
  â””â”€ MACD < Signal: BEARISH (momentum weakening)
  â””â”€ Crossovers indicate trend changes

### Bollinger Bands
- Period: 20 days
- Standard Deviations: 2
- Components:
  â””â”€ Middle Band: 20-day Simple Moving Average (SMA)
  â””â”€ Upper Band: Middle + (2 Ã— std dev)
  â””â”€ Lower Band: Middle - (2 Ã— std dev)
- Analysis:
  â””â”€ Price position within bands (%)
  â””â”€ Price near upper band: Overbought
  â””â”€ Price near lower band: Oversold
  â””â”€ Band width indicates volatility

### Volume Analysis
- 20-day Volume Moving Average
- Current volume ratio vs average
- Signals:
  â””â”€ Volume > 1.5x average: Strong conviction in price move
  â””â”€ Volume < 0.5x average: Weak/unconvincing move
  â””â”€ Used to CONFIRM or QUESTION price movements

### Simple Moving Average (SMA)
- Period: 20 days
- Trend Signal:
  â””â”€ Price > SMA: BULLISH trend
  â””â”€ Price < SMA: BEARISH trend
  â””â”€ Distance from SMA indicates trend strength

## ðŸ’° FUNDAMENTAL METRICS

### Current Fundamentals (from Screener.in)
- P/E Ratio (Price-to-Earnings)
  â””â”€ Valuation metric
  â””â”€ Compared against sector average
  â””â”€ Higher P/E = more expensive / higher growth expectations

- ROCE (Return on Capital Employed)
  â””â”€ Profitability metric (%)
  â””â”€ Measures how efficiently company uses capital
  â””â”€ Higher ROCE = better capital efficiency

### Future Enhancements (Not Yet Implemented)
- Quarterly Earnings Growth (YoY %)
- Debt-to-Equity Ratio
- Operating Margin
- Net Profit Margin
- Sector Average Comparisons

## ðŸ“° NEWS & SENTIMENT ANALYSIS

### News Sources
- RSS feeds from major financial portals
- Filtered specifically for each company using:
  â””â”€ Keyword matching
  â””â”€ Semantic similarity search
  â””â”€ Company-specific topics

### Current News Analysis
- Latest 5 business news articles per stock
- Social media momentum tracking (retail sentiment)
- Time-weighted: Recent news has more impact

### Future Enhancements (Not Yet Implemented)
- Sentiment scoring: Positive / Negative / Neutral
- Weight last 3 days news 2x more heavily
- High-impact event flagging (earnings, CEO changes, mergers)

## ðŸ“ˆ PRICE DATA

### Historical Price Data
- Last 30 days of daily prices
- Components:
  â””â”€ Open price
  â””â”€ High price
  â””â”€ Low price
  â””â”€ Close price
  â””â”€ Volume

### Used For
- Technical indicator calculations
- Trend identification
- Support/resistance levels
- Pattern recognition

## ðŸ§  AI ANALYSIS FRAMEWORK

The AI considers 6 professional investment theories:

1. **Global Macro Impact**
   â””â”€ How do S&P 500, oil prices, USD/INR affect this stock?
   â””â”€ Currency strength impacts exporters vs importers differently

2. **Technical Confluence**  
   â””â”€ Do RSI, MACD, and Bollinger Bands agree?
   â””â”€ Multiple indicators confirming = stronger signal
   â””â”€ Divergence = uncertainty, lower confidence

3. **Market Regime Adjustment**
   â””â”€ Behavior differs in BULL vs BEAR markets
   â””â”€ HIGH volatility = wider expected ranges
   â””â”€ Adjust confidence based on regime

4. **Volume Confirmation**
   â””â”€ Price moves WITH volume = trustworthy
   â””â”€ Price moves WITHOUT volume = suspect
   â””â”€ Volume validates or questions technical signals

5. **Sentiment vs Fundamentals**
   â””â”€ News catalysts aligned with technicals?
   â””â”€ Positive news + bullish technicals = strong UP
   â””â”€ Negative news despite good fundamentals = caution

6. **Mean Reversion vs Momentum**
   â””â”€ Is stock trending (ride momentum)?
   â””â”€ Or range-bound (bet on reversion to mean)?
   â””â”€ Bollinger Bands + RSI help identify

## ðŸ“‹ PREDICTION OUTPUT FORMAT

### Multi-Timeframe Predictions

**Weekly Outlook (5 trading days)**
- Trend: UP / DOWN / NEUTRAL
- Range: Minimum to Maximum % move expected
- Example: UP, -1% to +5%

**Daily Prediction (Next trading day)**
- Direction: UP / DOWN / NEUTRAL
- Probability: 0.0 to 1.0 (0% to 100% chance)
- Range: Minimum to Maximum % move expected
- Example: UP (65% probability), +0.5% to +2.5%

**Confidence Score**
- Scale: 1 to 10
- Factors affecting confidence:
  â””â”€ Signal strength (all indicators agree vs diverge)
  â””â”€ Market uncertainty (volatility regime)
  â””â”€ Self-learning adjustment (past accuracy)
  â””â”€ Data quality and completeness

**Rationale**
- 2-3 sentence explanation
- Must reference:
  â””â”€ Global market context (S&P, oil, etc.)
  â””â”€ Technical signals (RSI, MACD, BB position)
  â””â”€ Fundamental or news factors
- Example: "S&P 500 rallying (+0.8%), RSI at 62 (neutral-bullish), 
  MACD showing bullish crossover. Oil prices stable and volume 
  1.2x average confirms upward momentum in BULL/MEDIUM regime."

## ðŸ§  SELF-LEARNING SYSTEM

### Active Learning Loop
1. **Backfill Actual Results**
   â””â”€ Update predictions with actual open/close prices
   â””â”€ Compare predicted direction vs actual direction

2. **Evaluate Accuracy**
   â””â”€ Was prediction correct? (direction match)
   â””â”€ Calculate error margin (% difference)
   â””â”€ Assign accuracy score (0-1)

3. **Calculate Rolling Performance**
   â””â”€ Last 10 predictions per stock
   â””â”€ Accuracy rate (% correct)
   â””â”€ Average confidence vs actual accuracy

4. **Adjust Future Confidence**
   â””â”€ If accuracy > 70%: BOOST confidence (+1 to +2)
   â””â”€ If accuracy < 50%: REDUCE confidence (-1 to -2)
   â””â”€ Dynamic adjustment per stock

### Future Enhancement: Streak-Based Learning
- Track consecutive wins/losses
- After 5+ wins: Boost confidence by 20%
- After 3+ losses: Reduce confidence by 30%
- Reset on direction change

## ðŸ“Š DATA SOURCES

### Live Data Providers
1. **Yahoo Finance API (yfinance)**
   â””â”€ Stock prices (NSE: .NS suffix)
   â””â”€ Index prices (^NSEI, ^BSESN)
   â””â”€ S&P 500 (^GSPC)
   â””â”€ Crude Oil (CL=F)
   â””â”€ USD/INR (INR=X)

2. **Screener.in**
   â””â”€ Fundamental metrics (P/E, ROCE)
   â””â”€ Corporate data

3. **RSS News Feeds**
   â””â”€ MoneyControl
   â””â”€ Economic Times
   â””â”€ Other financial news sources

### Database Storage
- **stock_market.db**
  â””â”€ stock_daily_prices
  â””â”€ stock_fundamentals
  â””â”€ technical_indicators (NEW)
  â””â”€ market_context (NEW)

- **predictions.db**
  â””â”€ prediction_history
  â””â”€ prediction_performance

- **ChromaDB (Vector Database)**
  â””â”€ top10_nifty_news (filtered news)

## ðŸŽ¯ STOCKS & INDICES COVERED

### 10 NIFTY Stocks
1. Reliance Industries (RELIANCE.NS)
2. TCS (TCS.NS)
3. HDFC Bank (HDFCBANK.NS)
4. Infosys (INFY.NS)
5. ICICI Bank (ICICIBANK.NS)
6. Bharti Airtel (BHARTIARTL.NS)
7. ITC (ITC.NS)
8. Wipro (WIPRO.NS)
9. HCL Technologies (HCLTECH.NS)
10. Bajaj Finance (BAJFINANCE.NS)

### 2 Market Indices
1. NIFTY 50 (^NSEI)
2. SENSEX (^BSESN)

## ðŸ“… UPDATE FREQUENCY

- **News**: Real-time via RSS feeds
- **Prices**: Daily (end of day)
- **Technical Indicators**: Calculated after each price update
- **Market Context**: Daily (global markets)
- **AI Predictions**: Once per day (for next trading day)
- **Performance Evaluation**: Daily (when actual results available)

## ðŸ”„ PREDICTION PIPELINE SEQUENCE

1. Fetch latest news â†’ Filter for companies
2. Fetch global market context (S&P, Oil, USD/INR, Regime)
3. Fetch stock prices â†’ Calculate technical indicators
4. Fetch fundamentals
5. Update historical prediction outcomes
6. Evaluate prediction accuracy â†’ Adjust confidence
7. Generate new AI predictions using ALL above data
8. Save predictions to database
9. Serve via API to frontend dashboard

## ðŸ’¡ KEY DIFFERENTIATORS

What makes these predictions institutional-grade:

âœ… **Multi-dimensional Analysis**
   - Not just one indicator, but 15+ data points
   
âœ… **Global Context Awareness**
   - Considers US markets, commodities, currency

âœ… **Regime-Aware**
   - Adjusts behavior based on market conditions

âœ… **Self-Learning**
   - Improves based on actual performance

âœ… **Probabilistic**
   - Provides ranges and probabilities, not just point predictions

âœ… **Multi-Time frame**
   - Both weekly trend AND daily precision

âœ… **Volume-Confirmed**
   - Validates price moves with volume data

âœ… **Fundamental-Technical Fusion**
   - Combines both analysis types

---

Last Updated: 2025-12-26
Model: Gemini 2.5 Flash (or latest available)
